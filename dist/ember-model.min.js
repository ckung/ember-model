// ==========================================================================
// Project:   Ember Model
// Copyright: Â©2013 Erik Bryn and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// 0.0.11-100-g7500733
// 7500733 (2014-07-23 14:41:24 -0400)

!function(){var a="0.0.11";Ember.libraries&&Ember.libraries.register("Ember Model",a)}(),function(){function a(a){var b=function(){var b=this.constructor.toString();throw new Error(a.replace("{{className}}",b))};return b.isUnimplemented=!0,b}Ember.Adapter=Ember.Object.extend({find:a("{{className}} must implement find"),findQuery:a("{{className}} must implement findQuery"),findMany:a("{{className}} must implement findMany"),findAll:a("{{className}} must implement findAll"),createRecord:a("{{className}} must implement createRecord"),saveRecord:a("{{className}} must implement saveRecord"),deleteRecord:a("{{className}} must implement deleteRecord"),load:function(a,b,c){a.load(b,c)}})}(),function(){var a=Ember.get,b=Ember.set;Ember.FixtureAdapter=Ember.Adapter.extend({_counter:0,_findData:function(b,c){var d=b.FIXTURES,e=c.toString(),f=a(b,"primaryKey"),g=Ember.A(d).find(function(a){return a[f].toString()===e});return g},_setPrimaryKey:function(c){var d=c.constructor,e=(d.FIXTURES,a(d,"primaryKey"));c.get(e)||b(c,e,this._generatePrimaryKey())},_generatePrimaryKey:function(){var a=this.get("_counter");return this.set("_counter",a+1),"fixture-"+a},find:function(a,b){var c=this._findData(a.constructor,b);return new Ember.RSVP.Promise(function(d){Ember.run.later(this,function(){Ember.run(a,a.load,b,c),d(a)},0)})},findMany:function(a,b,c){for(var d=(a.FIXTURES,[]),e=0,f=c.length;f>e;e++)d.push(this._findData(a,c[e]));return new Ember.RSVP.Promise(function(c){Ember.run.later(this,function(){Ember.run(b,b.load,a,d),c(b)},0)})},findAll:function(a,b){var c=a.FIXTURES;return new Ember.RSVP.Promise(function(d){Ember.run.later(this,function(){Ember.run(b,b.load,a,c),d(b)},0)})},createRecord:function(a){var b=a.constructor,c=b.FIXTURES,d=this;return new Ember.RSVP.Promise(function(e){Ember.run.later(this,function(){d._setPrimaryKey(a),c.push(b.findFromCacheOrLoad(a.toJSON())),a.didCreateRecord(),e(a)},0)})},saveRecord:function(a){return new Ember.RSVP.Promise(function(b){Ember.run.later(this,function(){a.didSaveRecord(),b(a)},0)})},deleteRecord:function(a){return new Ember.RSVP.Promise(function(b){Ember.run.later(this,function(){a.didDeleteRecord(),b(a)},0)})}})}(),function(){var a=Ember.get,b=Ember.set;Ember.RecordArray=Ember.ArrayProxy.extend(Ember.Evented,{isLoaded:!1,isLoading:Ember.computed.not("isLoaded"),load:function(a,c){b(this,"content",this.materializeData(a,c)),this.notifyLoaded()},loadForFindMany:function(c){var d=this,e=a(this,"_ids").map(function(a){return c.cachedRecordForId(a,d.container)});b(this,"content",Ember.A(e)),this.notifyLoaded()},notifyLoaded:function(){b(this,"isLoaded",!0),this.trigger("didLoad")},materializeData:function(a,b){var c=this;return Ember.A(b.map(function(b){return a.findFromCacheOrLoad(b,c.container)}))},reload:function(){var a,c=this.get("modelClass"),d=this;return b(this,"isLoaded",!1),c._findAllRecordArray===this?c.adapter.findAll(c,this):this._query?c.adapter.findQuery(c,this,this._query):(a=this.map(function(a){return a.reload()}),Ember.RSVP.all(a).then(function(){d.notifyLoaded()}))}})}(),function(){var a=Ember.get;Ember.FilteredRecordArray=Ember.RecordArray.extend({init:function(){if(!a(this,"modelClass"))throw new Error("FilteredRecordArrays must be created with a modelClass");if(!a(this,"filterFunction"))throw new Error("FilteredRecordArrays must be created with a filterFunction");if(!a(this,"filterProperties"))throw new Error("FilteredRecordArrays must be created with filterProperties");var b=a(this,"modelClass");b.registerRecordArray(this),this.registerObservers(),this.updateFilter(),this._super()},updateFilter:function(){var b=this,c=[];a(this,"modelClass").forEachCachedRecord(function(a){b.filterFunction(a)&&c.push(a)}),this.set("content",Ember.A(c))},updateFilterForRecord:function(b){var c=a(this,"content");this.filterFunction(b)&&!c.contains(b)&&c.pushObject(b)},registerObservers:function(){var b=this;a(this,"modelClass").forEachCachedRecord(function(a){b.registerObserversOnRecord(a)})},registerObserversOnRecord:function(b){for(var c=this,d=a(this,"filterProperties"),e=0,f=a(d,"length");f>e;e++)b.addObserver(d[e],c,"updateFilterForRecord")}})}(),function(){var a=Ember.get,b=Ember.set;Ember.ManyArray=Ember.RecordArray.extend({_records:null,originalContent:null,_modifiedRecords:null,unloadObject:function(b){var c=a(this,"content").findBy("clientId",b._reference.clientId);a(this,"content").removeObject(c);var d=a(this,"originalContent").findBy("clientId",b._reference.clientId);a(this,"originalContent").removeObject(d)},isDirty:function(){var b=a(this,"originalContent"),c=a(b,"length"),d=a(this,"content"),e=a(d,"length");if(c!==e)return!0;if(this._modifiedRecords&&this._modifiedRecords.length)return!0;for(var f=!1,g=0,h=e;h>g;g++)if(!b.contains(d[g])){f=!0;break}return f}.property("content.[]","originalContent.[]","_modifiedRecords.[]"),objectAtContent:function(b){var c=a(this,"content");if(c.length){var d=c[b].record?!1:!0,e=this.materializeRecord(b,this.container);if(d){var f=e.get("isDirty"),g=e.get("isNew");(f||g)&&this._modifiedRecords.pushObject(c[b]),Ember.addObserver(c[b],"record.isDirty",this,"recordStateChanged"),e.registerParentHasManyArray(this)}return e}},save:function(){return Ember.RSVP.all(this.map(function(a){return a.save()}))},replaceContent:function(a,b,c){c=Ember.EnumerableUtils.map(c,function(a){return a._reference},this),this._super(a,b,c)},_contentWillChange:function(){var b=a(this,"content");b&&(this.arrayWillChange(b,0,a(b,"length"),0),b.removeArrayObserver(this),this._setupOriginalContent(b))}.observesBefore("content"),_contentDidChange:function(){var b=a(this,"content");b&&(b.addArrayObserver(this),this.arrayDidChange(b,0,0,a(b,"length")))}.observes("content"),arrayWillChange:function(a,b,c){for(var d=a,e=b;b+c>e;e++){var f=d[e];f&&f.record&&(this._modifiedRecords.removeObject(f),f.record.unregisterParentHasManyArray(this),Ember.removeObserver(f,"record.isDirty",this,"recordStateChanged"))}},arrayDidChange:function(b,c,d,e){for(var f=a(this,"parent"),g=a(this,"relationshipKey"),h=a(this,"isDirty"),i=b,j=c;c+e>j;j++){var k=i[j];if(k&&k.record){var l=k.record.get("isDirty"),m=k.record.get("isNew");(l||m)&&this._modifiedRecords.pushObject(k),Ember.addObserver(k,"record.isDirty",this,"recordStateChanged"),k.record.registerParentHasManyArray(this)}}h?f._relationshipBecameDirty(g):f._relationshipBecameClean(g)},load:function(a){Ember.setProperties(this,{content:a,originalContent:a.slice()}),b(this,"_modifiedRecords",[])},revert:function(){this._setupOriginalContent()},_setupOriginalContent:function(c){c=c||a(this,"content"),c&&b(this,"originalContent",c.slice()),b(this,"_modifiedRecords",[])},init:function(){this._super(),this._setupOriginalContent(),this._contentDidChange()},recordStateChanged:function(b){var c=a(this,"parent"),d=a(this,"relationshipKey");b.record.get("isDirty")?(-1===this._modifiedRecords.indexOf(b)&&this._modifiedRecords.pushObject(b),c._relationshipBecameDirty(d)):(this._modifiedRecords.indexOf(b)>-1&&this._modifiedRecords.removeObject(b),this.get("isDirty")||c._relationshipBecameClean(d))}}),Ember.HasManyArray=Ember.ManyArray.extend({materializeRecord:function(b,c){var d,e=a(this,"modelClass"),f=a(this,"content"),g=f.objectAt(b);return d=g.record?g.record:e.find(g.id),d.container=c,d},toJSON:function(){var a=[],b=this.get("content");return b.forEach(function(b){b.id&&a.push(b.id)}),a}}),Ember.EmbeddedHasManyArray=Ember.ManyArray.extend({create:function(b){var c=a(this,"modelClass"),d=c.create(b);return this.pushObject(d),d},materializeRecord:function(b,c){var d,e=a(this,"modelClass"),f=a(e,"primaryKey"),g=a(this,"content"),h=g.objectAt(b),i=h.data;return h.record?d=h.record:(d=e.create({_reference:h,container:c}),h.record=d,i&&d.load(i[f],i)),d.container=c,d},toJSON:function(){return this.map(function(a){return a.toJSON()})}})}(),function(){function a(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1}function b(b,c){for(var d,e=0,f=c.length;f>e;e++)d=c[e],a(b,d)||b.push(d);return b}var c=Ember.get,d=Ember.set,e=(Ember.setProperties,Ember.meta,Ember.String.underscore);Ember.run.queues.push("data"),Ember.Model=Ember.Object.extend(Ember.Evented,{isLoaded:!0,isLoading:Ember.computed.not("isLoaded"),isNew:!0,isDeleted:!1,_dirtyAttributes:null,getAttr:function(a,b){return b},isDirty:function(){var a=c(this,"_dirtyAttributes");return a&&0!==a.length||!1}.property("_dirtyAttributes.length"),_relationshipBecameDirty:function(a){var b=c(this,"_dirtyAttributes");b.contains(a)||b.pushObject(a)},_relationshipBecameClean:function(a){var b=c(this,"_dirtyAttributes");b.removeObject(a)},dataKey:function(a){var b=c(this.constructor,"camelizeKeys"),d=this.constructor.metaForProperty(a);return d.options&&d.options.key?b?e(d.options.key):d.options.key:b?e(a):a},init:function(){this._createReference(),this._dirtyAttributes||d(this,"_dirtyAttributes",[]),this._super()},_createReference:function(){var a=this._reference,b=this.getPrimaryKey();return a?a.id!==b&&(a.id=b,this.constructor._cacheReference(a)):(a=this.constructor._getOrCreateReferenceForId(b),a.record=this,this._reference=a),a.id||(a.id=b),a},getPrimaryKey:function(){return c(this,c(this.constructor,"primaryKey"))},load:function(a,b){var e={};e[c(this.constructor,"primaryKey")]=a,d(this,"_data",Ember.merge(e,b)),this.getWithDefault("_dirtyAttributes",[]).clear(),this._reloadHasManys();for(var f,g,h,i,j,k=this.constructor._relationships||[],l=Ember.meta(this),m=0,n=k.length;n>m;m++)f=k[m],g=l.descs[f],h=g.meta(),h.options.embedded&&(j=h.type,"string"==typeof j&&(j=Ember.get(Ember.lookup,j)||this.container.lookupFactory("model:"+j)),i=e[f],i&&j.load(i));d(this,"isNew",!1),d(this,"isLoaded",!0),this._createReference(),this.trigger("didLoad")},didDefineProperty:function(a,b,c){if(c instanceof Ember.Descriptor){var d=c.meta(),e=a.constructor;d.isAttribute?(e._attributes||(e._attributes=[]),e._attributes.push(b)):d.isRelationship&&(e._relationships||(e._relationships=[]),e._relationships.push(b),d.relationshipKey=b)}},serializeHasMany:function(a){return this.get(a).toJSON()},serializeBelongsTo:function(a,b){if(b.options.embedded){var d=this.get(a);return d?d.toJSON():null}var e=c(b.getType(),"primaryKey");return this.get(a+"."+e)},toJSON:function(){var a,b,d={},e=this.constructor.getAttributes(),f=this.constructor.getRelationships(),g=e?this.getProperties(e):{},h=c(this.constructor,"rootKey");for(a in g)b=this.constructor.metaForProperty(a),d[this.dataKey(a)]=b.type&&b.type.serialize?b.type.serialize(g[a]):b.type&&Ember.Model.dataTypes[b.type]?Ember.Model.dataTypes[b.type].serialize(g[a]):g[a];if(f)for(var i,j,k=0;k<f.length;k++)a=f[k],b=this.constructor.metaForProperty(a),j=b.options.key||a,i="belongsTo"===b.kind?this.serializeBelongsTo(a,b):this.serializeHasMany(a,b),d[j]=i;if(h){var l={};return l[h]=d,l}return d},save:function(){var a=this.constructor.adapter;if(d(this,"isSaving",!0),c(this,"isNew"))return a.createRecord(this);if(c(this,"isDirty"))return a.saveRecord(this);var b=this,e=new Ember.RSVP.Promise(function(a){a(b)});return d(this,"isSaving",!1),e},reload:function(){return this.getWithDefault("_dirtyAttributes",[]).clear(),this.constructor.reload(this.get(c(this.constructor,"primaryKey")),this.container)},revert:function(){this.getWithDefault("_dirtyAttributes",[]).clear(),this.notifyPropertyChange("_data"),this._reloadHasManys(!0)},didCreateRecord:function(){{var a=c(this.constructor,"primaryKey");c(this,a)}d(this,"isNew",!1),d(this,"_dirtyAttributes",[]),this.constructor.addToRecordArrays(this),this.trigger("didCreateRecord"),this.didSaveRecord()},didSaveRecord:function(){d(this,"isSaving",!1),this.trigger("didSaveRecord"),this.get("isDirty")&&this._copyDirtyAttributesToData()},deleteRecord:function(){return this.constructor.adapter.deleteRecord(this)},didDeleteRecord:function(){this.constructor.removeFromRecordArrays(this),d(this,"isDeleted",!0),this.trigger("didDeleteRecord")},_copyDirtyAttributesToData:function(){if(this._dirtyAttributes){var a,b=this._dirtyAttributes,e=c(this,"_data");e||(e={},d(this,"_data",e));for(var f=0,g=b.length;g>f;f++)a=b[f],e[this.dataKey(a)]=this.cacheFor(a);d(this,"_dirtyAttributes",[]),this._resetDirtyStateInNestedObjects(this)}},_resetDirtyStateInNestedObjects:function(a){var b,c;if(a._hasManyArrays)for(b=0;b<a._hasManyArrays.length;b++){var d=a._hasManyArrays[b];if(d.revert(),d.embedded)for(var e=0;e<d.get("length");e++)c=d.objectAt(e),c._copyDirtyAttributesToData()}if(a._belongsTo)for(b=0;b<a._belongsTo.length;b++){var f=a._belongsTo[b];f.options.embedded&&(c=this.get(f.relationshipKey),c&&c._copyDirtyAttributesToData())}},_registerHasManyArray:function(a){this._hasManyArrays||(this._hasManyArrays=Ember.A([])),this._hasManyArrays.pushObject(a)},registerParentHasManyArray:function(a){this._parentHasManyArrays||(this._parentHasManyArrays=Ember.A([])),this._parentHasManyArrays.pushObject(a)},unregisterParentHasManyArray:function(a){this._parentHasManyArrays&&this._parentHasManyArrays.removeObject(a)},_reloadHasManys:function(a){if(this._hasManyArrays){var b,d;for(b=0;b<this._hasManyArrays.length;b++){var e=this._hasManyArrays[b],f=this._getHasManyContent(c(e,"key"),c(e,"modelClass"),c(e,"embedded"));if(!a)for(d=0;d<e.get("length");d++)e.objectAt(d).get("isNew")&&!e.objectAt(d).get("isDeleted")&&f.addObject(e.objectAt(d)._reference);e.load(f)}}},_getHasManyContent:function(a,b,d){var e=c(this,"_data."+a);if(e){var f,g,h;d?(g=c(b,"primaryKey"),f=function(a){return h=b._getOrCreateReferenceForId(a[g]),h.data=a,h}):f=function(a){return b._getOrCreateReferenceForId(a)},e=Ember.EnumerableUtils.map(e,f)}return Ember.A(e||[])},_registerBelongsTo:function(a){this._belongsTo||(this._belongsTo=Ember.A([])),this._belongsTo.pushObject(a)}}),Ember.Model.reopenClass({primaryKey:"id",adapter:Ember.Adapter.create(),_clientIdCounter:1,getAttributes:function(){this.proto();var a=this._attributes||[];return"function"==typeof this.superclass.getAttributes&&(a=this.superclass.getAttributes().concat(a)),a},getRelationships:function(){this.proto();var a=this._relationships||[];return"function"==typeof this.superclass.getRelationships&&(a=this.superclass.getRelationships().concat(a)),a},fetch:function(a){return arguments.length?Ember.isArray(a)?this._findFetchMany(a,!0):"object"==typeof a?this._findFetchQuery(a,!0):this._findFetchById(a,!0):this._findFetchAll(!0)},find:function(a){return arguments.length?Ember.isArray(a)?this._findFetchMany(a,!1):"object"==typeof a?this._findFetchQuery(a,!1):this._findFetchById(a,!1):this._findFetchAll(!1)},findQuery:function(a){return this._findFetchQuery(a,!1)},fetchQuery:function(a){return this._findFetchQuery(a,!0)},_findFetchQuery:function(a,b,c){var d=Ember.RecordArray.create({modelClass:this,_query:a,container:c}),e=this.adapter.findQuery(this,d,a);return b?e:d},findMany:function(a){return this._findFetchMany(a,!1)},fetchMany:function(a){return this._findFetchMany(a,!0)},_findFetchMany:function(a,c,d){var e,f=Ember.RecordArray.create({_ids:a,modelClass:this,container:d});return this.recordArrays||(this.recordArrays=[]),this.recordArrays.push(f),this._currentBatchIds?(b(this._currentBatchIds,a),this._currentBatchRecordArrays.push(f)):(this._currentBatchIds=b([],a),this._currentBatchRecordArrays=[f]),c&&(e=Ember.Deferred.create(),Ember.set(e,"resolveWith",f),this._currentBatchDeferreds||(this._currentBatchDeferreds=[]),this._currentBatchDeferreds.push(e)),Ember.run.scheduleOnce("data",this,this._executeBatch,d),c?e:f},findAll:function(){return this._findFetchAll(!1)},fetchAll:function(){return this._findFetchAll(!0)},_findFetchAll:function(a,b){var c=this,d=this._currentFindFetchAllPromise;if(a&&d)return d;if(this._findAllRecordArray)return a?new Ember.RSVP.Promise(function(a){a(c._findAllRecordArray)}):this._findAllRecordArray;var e=this._findAllRecordArray=Ember.RecordArray.create({modelClass:this,container:b}),f=this._currentFindFetchAllPromise=this.adapter.findAll(this,e);return f.finally(function(){c._currentFindFetchAllPromise=null}),f.then&&f.then(null,function(){return c._findAllRecordArray=null,Ember.RSVP.reject.apply(null,arguments)}),a?f:e},findById:function(a){return this._findFetchById(a,!1)},fetchById:function(a){return this._findFetchById(a,!0)},_findFetchById:function(a,b,d){{var e,f=this.cachedRecordForId(a,d),g=c(f,"isLoaded");c(this,"adapter")}return g?b?new Ember.RSVP.Promise(function(a){a(f)}):f:(e=this._fetchById(f,a),b?e:f)},_currentBatchIds:null,_currentBatchRecordArrays:null,_currentBatchDeferreds:null,reload:function(a,b){var c=this.cachedRecordForId(a,b);return c.set("isLoaded",!1),this._fetchById(c,a)},_fetchById:function(b,d){var e,f=c(this,"adapter");return f.findMany&&!f.findMany.isUnimplemented?(this._currentBatchIds?a(this._currentBatchIds,d)||this._currentBatchIds.push(d):(this._currentBatchIds=[d],this._currentBatchRecordArrays=[]),e=Ember.Deferred.create(),Ember.set(e,"resolveWith",b),this._currentBatchDeferreds||(this._currentBatchDeferreds=[]),this._currentBatchDeferreds.push(e),Ember.run.scheduleOnce("data",this,this._executeBatch,b.container),e):f.find(b,d)},_executeBatch:function(a){var b,d,e=this._currentBatchIds,f=this._currentBatchRecordArrays,g=this._currentBatchDeferreds,h=this,i=[];for(this._currentBatchIds=null,this._currentBatchRecordArrays=null,this._currentBatchDeferreds=null,d=0;d<e.length;d++)this.cachedRecordForId(e[d]).get("isLoaded")||i.push(e[d]);if(1===i.length)b=c(this,"adapter").find(this.cachedRecordForId(i[0],a),i[0]);else{var j=Ember.RecordArray.create({_ids:e,container:a});0===i.length?(b=new Ember.RSVP.Promise(function(a){a(j)}),j.notifyLoaded()):b=c(this,"adapter").findMany(this,j,i)}b.then(function(){for(var a=0,b=f.length;b>a;a++)f[a].loadForFindMany(h);if(g)for(a=0,b=g.length;b>a;a++){var c=Ember.get(g[a],"resolveWith");g[a].resolve(c)}}).then(null,function(a){if(g)for(var b=0,c=g.length;c>b;b++)g[b].reject(a)})},getCachedReferenceRecord:function(a,b){var c=this._getReferenceById(a);return c&&c.record?(c.record.container=b,c.record):void 0},cachedRecordForId:function(a,b){var d;if(this.transient||(d=this.getCachedReferenceRecord(a,b)),!d){var e=c(this,"primaryKey"),f={isLoaded:!1};if(f[e]=a,f.container=b,d=this.create(f),!this.transient){var g=this.sideloadedData&&this.sideloadedData[a];g&&d.load(a,g)}}return d},addToRecordArrays:function(a){this._findAllRecordArray&&this._findAllRecordArray.addObject(a),this.recordArrays&&this.recordArrays.forEach(function(b){b instanceof Ember.FilteredRecordArray?(b.registerObserversOnRecord(a),b.updateFilter()):b.addObject(a)})},unload:function(a){this.removeFromHasManyArrays(a),this.removeFromRecordArrays(a);var b=a.get(c(this,"primaryKey"));this.removeFromCache(b)},clearCache:function(){this.sideloadedData=void 0,this._referenceCache=void 0,this._findAllRecordArray=void 0},removeFromCache:function(a){this.sideloadedData&&this.sideloadedData[a]&&delete this.sideloadedData[a],this._referenceCache&&this._referenceCache[a]&&delete this._referenceCache[a]},removeFromHasManyArrays:function(a){a._parentHasManyArrays&&(a._parentHasManyArrays.forEach(function(b){b.unloadObject(a)}),a._parentHasManyArrays=null)},removeFromRecordArrays:function(a){this._findAllRecordArray&&this._findAllRecordArray.removeObject(a),this.recordArrays&&this.recordArrays.forEach(function(b){b.removeObject(a)})},findFromCacheOrLoad:function(a,b){var d;return d=a[c(this,"primaryKey")]?this.cachedRecordForId(a[c(this,"primaryKey")],b):this.create({isLoaded:!1,container:b}),d.load(a[c(this,"primaryKey")],a),d},registerRecordArray:function(a){this.recordArrays||(this.recordArrays=[]),this.recordArrays.push(a)},unregisterRecordArray:function(a){this.recordArrays&&Ember.A(this.recordArrays).removeObject(a)},forEachCachedRecord:function(a){if(this._referenceCache){var b=Object.keys(this._referenceCache);b.map(function(a){return this._getReferenceById(a).record},this).forEach(a)}},load:function(a){"array"!==Ember.typeOf(a)&&(a=[a]),this.sideloadedData||(this.sideloadedData={});for(var b=0,d=a.length;d>b;b++){var e=a[b],f=e[c(this,"primaryKey")],g=this.getCachedReferenceRecord(f);g?g.load(f,e):this.sideloadedData[f]=e}},_getReferenceById:function(a){return this._referenceCache||(this._referenceCache={}),this._referenceCache[a]},_getOrCreateReferenceForId:function(a){var b=this._getReferenceById(a);return b||(b=this._createReference(a)),b},_createReference:function(a){this._referenceCache||(this._referenceCache={});var b={id:a,clientId:this._clientIdCounter++};return this._cacheReference(b),b},_cacheReference:function(a){this._referenceCache||(this._referenceCache={}),Ember.isEmpty(a.id)||(this._referenceCache[a.id]=a)}})}(),function(){function a(a){var b=this.type;if("string"==typeof this.type&&this.type&&(this.type=Ember.get(Ember.lookup,this.type),!this.type)){var c=a.container.lookup("store:main");this.type=c.modelFor(b),this.type.reopenClass({adapter:c.adapterFor(b)})}return this.type}Ember.get;Ember.hasMany=function(b,c){c=c||{};var d={type:b,isRelationship:!0,options:c,kind:"hasMany",getType:a};return Ember.computed(function(a,e,f){b=d.getType(this);var g=c.key||a;return arguments.length>1?f.setObjects(e):this.getHasMany(g,b,d,this.container)}).property().meta(d)},Ember.Model.reopen({getHasMany:function(a,b,c,d){var e=c.options.embedded,f=e?Ember.EmbeddedHasManyArray:Ember.HasManyArray,g=f.create({parent:this,modelClass:b,content:this._getHasManyContent(a,b,e),embedded:e,key:a,relationshipKey:c.relationshipKey,container:d});return this._registerHasManyArray(g),g}})}(),function(){function a(a){return a.container?a.container.lookup("store:main"):null}function b(b){var c=this.type;if("string"==typeof this.type&&this.type&&(c=Ember.get(Ember.lookup,this.type),!c)){var d=a(b);c=d.modelFor(this.type),c.reopenClass({adapter:d.adapterFor(this.type)})}return c}var c=Ember.get,d=Ember.set;Ember.belongsTo=function(e,f){f=f||{};var g={type:e,isRelationship:!0,options:f,kind:"belongsTo",getType:b};return Ember.computed(function(b,h,i){e=g.getType(this);var j=f.key||b,k=c(this,"_dirtyAttributes"),l=!1,m=this,n=function(a){a.get("isDirty")?m._relationshipBecameDirty(j):m._relationshipBecameClean(j)};if(k||(k=[],l=!0),arguments.length>1)return i!==h?k.pushObject(b):k.removeObject(b),l&&d(this,"_dirtyAttributes",k),g.options.embedded&&(i&&i.removeObserver("isDirty",n),h&&h.addObserver("isDirty",n)),void 0===h?null:h;var o=a(this);return h=this.getBelongsTo(j,e,g,o),this._registerBelongsTo(g),null!==h&&g.options.embedded&&(h.get("isDirty"),h.addObserver("isDirty",n)),h}).property("_data").meta(g)},Ember.Model.reopen({getBelongsTo:function(a,b,d,e){var f,g=c(this,"_data."+a);if(Ember.isNone(g))return null;if(d.options.embedded){var h=c(b,"primaryKey"),i=g[h];f=b.create({isLoaded:!1,id:i,container:this.container}),f.load(i,g)}else f=e?e._findSync(d.type,g):b.find(g);return f}})}(),function(){function a(a,b){return b&&b.deserialize?b.deserialize(a):b&&Ember.Model.dataTypes[b]?Ember.Model.dataTypes[b].deserialize(a):a}function b(a,b){return b&&b.serialize?b.serialize(a):b&&Ember.Model.dataTypes[b]?Ember.Model.dataTypes[b].serialize(a):a}var c=Ember.get,d=Ember.set,e=Ember.meta;Ember.Model.dataTypes={},Ember.Model.dataTypes[Date]={deserialize:function(a){return a?new Date(a):null},serialize:function(a){return a?a.toISOString():null},isEqual:function(a,b){return a instanceof Date&&(a=this.serialize(a)),b instanceof Date&&(b=this.serialize(b)),a===b}},Ember.Model.dataTypes[Number]={deserialize:function(a){return a||0===a?Number(a):null},serialize:function(a){return a||0===a?Number(a):null}},Ember.attr=function(f,g){return Ember.computed(function(h,i){var j=c(this,"_data"),k=this.dataKey(h),l=j&&c(j,k),m=e(this).proto===this,n=c(this,"_dirtyAttributes"),o=!1;return n||(n=[],o=!0),2===arguments.length?(m&&(j||(j={},d(this,"_data",j)),l=j[k]=i),l!==b(i,f)?n.pushObject(h):n.removeObject(h),o&&d(this,"_dirtyAttributes",n),i):null==l&&g&&null!=g.defaultValue?Ember.copy(g.defaultValue):this.getAttr(h,a(l,f))}).property("_data").meta({isAttribute:!0,type:f,options:g})}}(),function(){var a=Ember.get;Ember.RESTAdapter=Ember.Adapter.extend({find:function(a,b){var c=this.buildURL(a.constructor,b),d=this;return this.ajax(c).then(function(c){return d.didFind(a,b,c),a})},didFind:function(b,c,d){var e=a(b.constructor,"rootKey"),f=e?a(d,e):d;b.load(c,f)},findAll:function(a,b){var c=this.buildURL(a),d=this;return this.ajax(c).then(function(c){return d.didFindAll(a,b,c),b})},didFindAll:function(b,c,d){var e=a(b,"collectionKey"),f=e?a(d,e):d;c.load(b,f)},findQuery:function(a,b,c){var d=this.buildURL(a),e=this;return this.ajax(d,c).then(function(d){return e.didFindQuery(a,b,c,d),b})},didFindQuery:function(b,c,d,e){var f=a(b,"collectionKey"),g=f?a(e,f):e;c.load(b,g)},createRecord:function(a){var b=this.buildURL(a.constructor),c=this;return this.ajax(b,a.toJSON(),"POST").then(function(b){return c.didCreateRecord(a,b),a})},didCreateRecord:function(a,b){this._loadRecordFromData(a,b),a.didCreateRecord()},saveRecord:function(b){var c=a(b.constructor,"primaryKey"),d=this.buildURL(b.constructor,a(b,c)),e=this;return this.ajax(d,b.toJSON(),"PUT").then(function(a){return e.didSaveRecord(b,a),b})},didSaveRecord:function(a,b){this._loadRecordFromData(a,b),a.didSaveRecord()},deleteRecord:function(b){var c=a(b.constructor,"primaryKey"),d=this.buildURL(b.constructor,a(b,c)),e=this;return this.ajax(d,b.toJSON(),"DELETE").then(function(a){e.didDeleteRecord(b,a)})},didDeleteRecord:function(a){a.didDeleteRecord()},ajax:function(a,b,c,d){return this._ajax(a,b,c||"GET",d)},buildURL:function(b,c){var d=a(b,"url"),e=a(b,"urlSuffix")||"";if(!d)throw new Error("Ember.RESTAdapter requires a `url` property to be specified");return Ember.isEmpty(c)?d+e:d+"/"+c+e},ajaxSettings:function(a,b){return{url:a,type:b,dataType:"json"}},_ajax:function(a,b,c,d){return d||(d=this.ajaxSettings(a,c)),new Ember.RSVP.Promise(function(a,e){b&&("GET"===c?d.data=b:(d.contentType="application/json; charset=utf-8",d.data=JSON.stringify(b))),d.success=function(b){Ember.run(null,a,b)},d.error=function(a){a&&"object"==typeof a&&(a.then=null),Ember.run(null,e,a)},Ember.$.ajax(d)})},_loadRecordFromData:function(b,c){var d=a(b.constructor,"rootKey"),e=a(b.constructor,"primaryKey");c&&(c=d?a(c,d):c,Ember.isEmpty(c)||b.load(c[e],c))}})}(),function(){var a=Ember.get;Ember.LoadPromise=Ember.Object.extend(Ember.DeferredMixin,{init:function(){this._super.apply(this,arguments);var b=a(this,"target");a(b,"isLoaded")&&!a(b,"isNew")?this.resolve(b):b.one("didLoad",this,function(){this.resolve(b)})}}),Ember.loadPromise=function(a){return Ember.isNone(a)?null:a.then?a:Ember.LoadPromise.create({target:a})}}(),function(){if(Ember.DataAdapter){var a=Ember.get,b=Ember.String.capitalize,c=Ember.String.underscore,d=Ember.DataAdapter.extend({getFilters:function(){return[{name:"isNew",desc:"New"},{name:"isModified",desc:"Modified"},{name:"isClean",desc:"Clean"}]},detect:function(a){return a!==Ember.Model&&Ember.Model.detect(a)},columnsForType:function(a){var d=[],e=0,f=this;return a.getAttributes().forEach(function(a){if(e++>f.attributeLimit)return!1;var g=b(c(a).replace("_"," "));d.push({name:a,desc:g})}),d},getRecords:function(a){var b=[];return a.forEachCachedRecord(function(a){b.push(a)}),b},getRecordColumnValues:function(b){var c=this,d=0,e={id:a(b,"id")};return b.constructor.getAttributes().forEach(function(f){if(d++>c.attributeLimit)return!1;var g=a(b,f);e[f]=g}),e},getRecordKeywords:function(b){var c=[],d=Ember.A(["id"]);return b.constructor.getAttributes().forEach(function(a){d.push(a)}),d.forEach(function(d){c.push(a(b,d))}),c},getRecordFilterValues:function(a){return{isNew:a.get("isNew"),isModified:a.get("isDirty")&&!a.get("isNew"),isClean:!a.get("isDirty")}},getRecordColor:function(a){var b="black";return a.get("isNew")?b="green":a.get("isDirty")&&(b="blue"),b},observeRecord:function(a,b){var c=Ember.A(),d=this,e=Ember.A(["id","isNew","isDirty"]);a.constructor.getAttributes().forEach(function(a){e.push(a)}),e.forEach(function(e){var f=function(){b(d.wrapRecord(a))};Ember.addObserver(a,e,f),c.push(function(){Ember.removeObserver(a,e,f)})});var f=function(){c.forEach(function(a){a()})};return f}});Ember.onLoad("Ember.Application",function(a){a.initializer({name:"data-adapter",initialize:function(a,b){b.register("data-adapter:main",d)}})})}}(),function(){function a(){}Ember.Model.Store=Ember.Object.extend({container:null,modelFor:function(a){return this.container.lookupFactory("model:"+a)},adapterFor:function(a){var b=this.modelFor(a).adapter,c=this.container;return b&&b!==Ember.Model.adapter?b:(b=c.lookupFactory("adapter:"+a)||c.lookupFactory("adapter:application")||c.lookupFactory("adapter:REST"),b?b.create():b)},createRecord:function(a){var b=this.modelFor(a);return b.reopenClass({adapter:this.adapterFor(a)}),b.create({container:this.container})},find:function(b,c){return 1===arguments.length&&(c=a),this._find(b,c,!0)},_find:function(b,c,d){var e=this.modelFor(b);return e.reopenClass({adapter:this.adapterFor(b)}),c===a?e._findFetchAll(d,this.container):Ember.isArray(c)?e._findFetchMany(c,d,this.container):"object"==typeof c?e._findFetchQuery(c,d,this.container):e._findFetchById(c,d,this.container)},_findSync:function(a,b){return this._find(a,b,!1)}}),Ember.onLoad("Ember.Application",function(a){a.initializer({name:"store",initialize:function(a,b){b.register("store:main",a.lookupFactory("store:application")||Ember.Model.Store),b.inject("route","store","store:main"),b.inject("controller","store","store:main")}})})}();